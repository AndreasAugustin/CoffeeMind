(function(){var e;e="undefined"!=typeof exports&&null!==exports?exports:window,e.coffeeMind=e.coffeeMind||{},e.coffeeMind.display=function(){var n,t,r,o,l,a,u,i,s,c,f,d,m,g,h,p,v,w,b,y,C,S,R,x,M,k,I,E,P,T,A,D,q,z,F,O,N,U,W;return U={},a={},W={},d={},i=0,D=0,l=0,S=0,F={},o={},z={},E={},m={},r=[],R=[],I=0,O="",C="",q=function(n){var t;return U=n,W=e.settings,t=U("#game-screen .game-board"),i=W.cols,D=W.rows,O=W.srcPath,I=W.numColors,l=W.availableColours,S=W.imageSize,C=O+"images/forms_"+S+".png",a=document.createElement("canvas"),d=a.getContext("2d"),U(a).addClass("board"),a.width=i*S+S,a.height=D*S,t.append(c()),t.append(a),f(),s(),R=W.images,E=Date.now(),requestAnimationFrame(g),null},g=function(e){return t(e),P(e,E),E=e,requestAnimationFrame(g),null},M=function(e){var t,r;return t=function(e){var n,t,r,o;for(o=[],t=r=0;D>=0?D>r:r>D;t=D>=0?++r:--r)o.push(function(){var r,o,l;for(l=[],n=r=0,o=Math.floor(e*D*2);o>=0?o>r:r>o;n=o>=0?++r:--r)l.push(n>0&&i>n?u(n,t):void 0);return l}());return o},r=function(){return d.save(),d.globalCompositeOperation="lighter"},n(1e3,t,r,{done:e}),null},n=function(e,n){var t;return t={runTime:e,startTime:Date.now(),pos:0,fncs:n},r.push(t),null},P=function(e,n){var t,o,l,a,u,i,s,c;if(l=r.slice(0),u=l.length,u>0){for(a=i=0;u>=0?u>i:i>u;a=u>=0?++i:--i)t=l[a],t.fncs.before&&t.fncs.before(t.pos),t.lastPos=t.pos,o=n-t.startTime,t.pos=o/t.runTime,t.pos=Math.max(0,Math.min(1,t.pos));for(r=[],a=s=0,c=u-1;c>=0?c>=s:s>=c;a=c>=0?++s:--s)t=l[a],t.fncs.render(t.pos,t.pos-t.lastPos),1===t.pos&&(t.fncs.done?t.fncs.done():r.push(t))}return null},f=function(){var e,n,t;for(e=U("#game-screen .solution"),z=document.createElement("canvas"),F=z.getContext("2d"),z.width=i*S,z.height=S,F.fillStyle="rgba(255, 235, 255, 0.15)",n=t=0;l>=0?l>t:t>l;n=l>=0?++t:--t)n%2===0&&F.fillRect(n*S,n*S,S,S),e.append(z);return null},s=function(){var e,n,t,r;for(e=U("#game-screen .availableItems"),n=document.createElement("canvas"),o=n.getContext("2d"),n.width=l*S,n.height=S,o.fillStyle="rgba(255, 235, 255, 0.15)",t=r=0;l>=0?l>r:r>l;t=l>=0?++r:--r)t%2===0&&o.fillRect(t*S,t*S,S,S),e.append(n);return null},c=function(){var e,n,t,r,o,l;for(e=document.createElement("canvas"),n=e.getContext("2d"),U(e).addClass("background"),e.width=i*S+S,e.height=D*S,n.fillStyle="rgba(255, 235, 255, 0.15)",t=o=0;i>=0?i>o:o>i;t=i>=0?++o:--o)for(r=l=0;D>=0?D>l:l>D;r=D>=0?++l:--l)(t+r)%2===0&&n.fillRect(i*S,r*S,S,S);return e},x=function(e,n){return q(e),n(),null},A=function(){return W=e.settings,i=W.cols,D=W.rows,l=W.availableColours,S=W.imageSize,a.width=a.width,y(),null},v=function(e){var n,t,r,o;for(n=R[C],t=e.length,r=o=0;t>=0?t>o:o>t;r=t>=0?++o:--o)F.drawImage(n,e[r]*S,0,S,S,r*S,0,S,S);return null},y=function(){return z.width=z.width,null},h=function(){var e,n,t;for(e=R[C],n=t=0;l>=0?l>t:t>l;n=l>=0?++t:--t)o.drawImage(e,n*S,0,S,S,n*S,0,S,S);return null},p=function(e){var n,t,r,o,l,a,u;for(n=e.rightColor,t=e.rightPosition,r=e.rowNumber,l=i,d.fillStyle="rgba(0, 12, 210, 0.15)",d.strokeStyle="red",o=a=0;n>=0?n>a:a>n;o=n>=0?++a:--a)d.strokeRect(l*S+o*S/I,r*S,S/I,S/2),d.fillRect(l*S+o*S/I,r*S,S/I,S/2);for(d.fillStyle="red",d.strokeStyle="rgba(0, 12, 210, 0.15)",o=u=0;t>=0?t>u:u>t;o=t>=0?++u:--u)d.strokeRect(l*S+o*S/I,r*S+S/2,S/I,S/2),d.fillRect(l*S+o*S/I,r*S+S/2,S/I,S/2);return null},k=function(e,n,t){var r;return e===i?null:-1===t?(d.clearRect(e*S,n*S,S,S),null):(r=R[C],d.drawImage(r,t*S,0,S,S,e*S,n*S,S,S),null)},T=function(e,n,t){return m=m||{},m.x=e,m.y=n,d&&(t=t||.8,d.save(),d.lineWidth=.05*S,d.strokeStyle="rgba(250, 250, 150,"+t+")",d.strokeRect((e+.05)*S,(n+.05)*S,.9*S,.9*S),d.restore()),null},t=function(e){var n;return m&&(n=.5+(Math.sin(e/400)+1),T(m.x,m.y,n)),null},N=function(e,n,t){return d&&(u(e,n),k(e,n,t)),null},u=function(e,n){return 0>e||e>i||0>n||n>D?null:(d&&(d.save(),d.clearRect(e*S,n*S,S,S),d.restore()),null)},b=function(e){var t;return t=function(e){return a.style.left=.2*e*(Math.random()-.5)+"em",a.style.top=.2*e*(Math.random()-.5)+"em"},n(1e3,{render:t,done:function(){return a.style.left="0",a.style.top="0",w(e)}}),null},w=function(){return alert("game over man :("),null},{init:x,reset:A,myDrawImage:k,drawSolution:v,drawAvailableColours:h,hideSolution:y,drawCheckColors:p,renderCursor:T,unRenderCursor:N,levelUp:M,gameOver:b}}()}).call(this);