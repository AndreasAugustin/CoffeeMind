(function(){var n;n="undefined"!=typeof exports&&null!==exports?exports:window,n.coffeeMind=n.coffeeMind||{},n.coffeeMind.input=function(){var e,t,r,o,l,u,i,c;return c={},i={},o={},l={13:"KEY_ENTER",27:"KEY_ESCAPE",32:"KEY_SPACE",37:"KEY_LEFT",38:"KEY_UP",39:"KEY_RIGHT",40:"KEY_DOWN"},r=function(e){var r;return c=n.settings,i=e,r=i("#game-screen .game-board"),r.bind("mousedown",function(n){return t(n,"CLICK",n),null}),r.bind("touchstart",function(n){return t(n,"TOUCH",n.targetTouches[0]),null}),i(document).bind("keydown",function(n){var e;return e=l[n.keyCode],e&&c.controls[e]&&(n.preventDefault(),u(c.controls[e])),null}),null},t=function(n,e,t){var r,o,l,a,f,s,d,p;return r=c.controls[e],l=c.imageSize,r?(o=i("#game-screen .game-board")[0],s=o.getBoundingClientRect(),d=t.clientX-s.left,p=t.clientY-s.top,a=Math.floor(d/(s.width-l)*c.cols),f=Math.floor(p/s.height*c.rows),u(r,a,f),n.preventDefault(),null):null},e=function(n,e){return o[n]||(o[n]=[]),o[n].push(e),null},u=function(n){var e,t,r,l,u;if(t=o[n],e=Array.prototype.slice.call(arguments,1),t)for(l=t.length,r=u=0;l>=0?l>u:u>l;r=l>=0?++u:--u)t[r].apply(null,e);return null},{init:r,bind:e}}()}).call(this);